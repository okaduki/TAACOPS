# 2.2.32

まず表を書いてみる。

|     $$n$$      |  1  |  2  |  3  |  4  |  5  |  6  |  7  |  8  |  9  | 10  | 11  | 12  | 13  | 14  | 15  | 16  | 17  |
| -------------- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| $$[\sqrt{n}]$$ | 1   | 1   | 2   | 2   | 2   | 2   | 3   | 3   | 3   | 3   | 3   | 3   | 4   | 4   | 4   | 4   | 4   |
| $$f(n)$$       | 2   | 3   | 5   | 6   | 7   | 8   | 10  | 11  | 12  | 13  | 14  | 15  | 17  | 18  | 19  | 20  | 21  |

ちょうど平方数となる部分を飛ばすようになっているので$$f(n)$$は平方数になりそうにない。
どのような数$$n$$に対しても$$f(n)$$が平方数とならないことが示せれば、数列$$f(n),f(f(n)),\ldots$$が
平方数を持たないことが示せるので代わりにこれを示す。

背理法を用いる。ある自然数$$n>1$$と$$X>1$$に対して$$f(n) = X^2$$になったとする。
$$f(n) = n + [\sqrt{n}] = X^2,  [\sqrt{n}] = X^2 - n$$であるから、
$$ -\frac{1}{2} < \sqrt{n} - (X^2 - n) < \frac{1}{2} $$である。
また$$n$$がありうる範囲を制限したい。$$f$$が単調なことと$$m=(X-1)^2$$のとき
$$f(m) = (X-1)^2 + X-1 = X^2 -X < X^2$$であるから、$$m = (X-1)^2 < n$$とわかる。
よってある自然数$$0 \leq k < 2X-1$$が存在して$$n=X^2-k$$となる。
よって不等式は$$ -\frac{1}{2} < \sqrt{X^2-k} - k < \frac{1}{2}$$と書き直せる。
$$g(k) =  \sqrt{X^2-k} - k$$としておく。

表を見るとある平方数と平方数の間に$$n$$があるとき最も平方数に近づくのでそこの値でこの不等式が矛盾しないか調べたい。
これは$$k = X$$付近である。

$$g(X) = \sqrt{X^2-X} - X < 0$$であるから$$-\frac{1}{2}$$との大小を調査する。
$$ g(X) = \sqrt{(X-\frac{1}{2})^2-\frac{1}{4}} - X < \sqrt{(X-\frac{1}{2})^2} - X = -\frac{1}{2}$$
であるから$$g(X) < -\frac{1}{2}$$とわかる。特に$$g$$は単調減少なので任意の$$k \geq X$$について
$$g(k) < -\frac{1}{2}$$となる。

次に$$k=X-1$$のときを調べる。
このとき
$$g(X-1) = \sqrt{X^2-(X-1)} - (X-1) = \sqrt{(X-\frac{1}{2})^2 + \frac{3}{4}} - X+1 > X-\frac{1}{2} - X+1 = \frac{1}{2}$$である。
$$g$$の単調性から任意の$$k \leq X-1$$について$$g(k) > \frac{1}{2}$$がいえる。

以上より不等式$$-\frac{1}{2} < g(k) < \frac{1}{2}$$はどのような$$0 \leq k < 2X-1$$についても成り立たないため矛盾する。従って$$f(n)=X^2$$となる自然数$$n,X$$は存在しない。